---
import { CategorySelectWithProvider } from '@/components/CategorySelectWithProvider';
import Layout from '@/layouts/Layout.astro';
import type { SupportedLocale } from '../../../i18n/locales.ts';
import { loadTranslations } from '../../../i18n/utils.ts';

const { sessionId } = Astro.params;

if (!sessionId) {
  return Astro.redirect('/');
}

// Get current locale from Astro's i18n routing
// This is automatically set by Astro's i18n routing
const currentLocale = (Astro.currentLocale || 'en') as SupportedLocale;

// Load translations server-side for initial render
const translations = await loadTranslations(currentLocale);
---

<Layout title="categorySelect.title" translations={translations}>
	<CategorySelectWithProvider client:load translations={translations} locale={currentLocale} sessionId={sessionId} />
</Layout>
