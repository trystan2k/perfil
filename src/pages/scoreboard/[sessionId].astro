---
import { I18nProvider } from '../../components/I18nProvider';
import { Scoreboard as ScoreboardComponent } from '../../components/Scoreboard';
import Layout from '../../layouts/Layout.astro';
import { detectLocale } from '../../lib/localeDetection';

// For static build, provide a sample session path
// Client-side component handles actual session data fetching from IndexedDB
export function getStaticPaths() {
  return [{ params: { sessionId: 'sample-session' } }];
}

// Get the sessionId from the URL params
const { sessionId } = Astro.params;

// Detect locale from Astro config or Accept-Language header
const acceptLanguage = Astro.request.headers.get('accept-language');
const currentLocale = detectLocale(Astro.currentLocale, acceptLanguage);
---

<Layout title="Scoreboard - Perfil Game">
	<I18nProvider client:only="react" locale={currentLocale}>
		<ScoreboardComponent sessionId={sessionId} client:only="react" />
	</I18nProvider>
</Layout>
